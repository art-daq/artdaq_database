SET ( TEST_NAME "ManageConfigs_confcomposition" )

SET ( TEST_NUMBER "012" )

SET ( TEST_FILE_NUMBER "011" )
SET ( TEST_DBPROVIDER "filesystem" )
cet_test_env("ARTDAQ_DATABASE_URI=${ARTDAQ_DATABASE_URI_FILESYSTEM}")
string(RANDOM LENGTH 5 ALPHABET 0123456789 RAND_NAME)
configure_file ( ${CMAKE_CURRENT_SOURCE_DIR}/test${TEST_FILE_NUMBER}.cmp.json ${CMAKE_CURRENT_BINARY_DIR}/test${TEST_FILE_NUMBER}.cmp.${RAND_NAME}.json @ONLY )
configure_file ( ${CMAKE_CURRENT_SOURCE_DIR}/test${TEST_FILE_NUMBER}.flt.json ${CMAKE_CURRENT_BINARY_DIR}/test${TEST_FILE_NUMBER}.flt.${RAND_NAME}.json @ONLY )
cet_test(${TEST_NAME}_${TEST_DBPROVIDER}_${TEST_NUMBER}_t HANDBUILT  TEST_EXEC ConfigurationDB_t 
  DATAFILES 
    ${CMAKE_CURRENT_BINARY_DIR}/test${TEST_FILE_NUMBER}.cmp.${RAND_NAME}.json
    ${CMAKE_CURRENT_BINARY_DIR}/test${TEST_FILE_NUMBER}.flt.${RAND_NAME}.json
  TEST_ARGS  --searchquery=test${TEST_FILE_NUMBER}.flt.${RAND_NAME}.json -o buildfilter -x test${TEST_FILE_NUMBER}.cmp.${RAND_NAME}.json )

#SET ( TEST_FILE_NUMBER "011" )  
#SET ( TEST_DBPROVIDER "mongo" )
cet_test_env("ARTDAQ_DATABASE_URI=${ARTDAQ_DATABASE_URI_MONGO}")
#string(RANDOM LENGTH 5 ALPHABET 0123456789 RAND_NAME)
#configure_file ( ${CMAKE_CURRENT_SOURCE_DIR}/test${TEST_FILE_NUMBER}.cmp.json ${CMAKE_CURRENT_BINARY_DIR}/test${TEST_FILE_NUMBER}.cmp.${RAND_NAME}.json @ONLY )
#configure_file ( ${CMAKE_CURRENT_SOURCE_DIR}/test${TEST_FILE_NUMBER}.flt.json ${CMAKE_CURRENT_BINARY_DIR}/test${TEST_FILE_NUMBER}.flt.${RAND_NAME}.json @ONLY )
#cet_test(${TEST_NAME}_${TEST_DBPROVIDER}_${TEST_NUMBER}_t HANDBUILT  TEST_EXEC ConfigurationDB_t 
#  DATAFILES 
#    ${CMAKE_CURRENT_BINARY_DIR}/test${TEST_FILE_NUMBER}.cmp.${RAND_NAME}.json
#    ${CMAKE_CURRENT_BINARY_DIR}/test${TEST_FILE_NUMBER}.flt.${RAND_NAME}.json
#  TEST_ARGS  --searchquery=test${TEST_FILE_NUMBER}.flt.${RAND_NAME}.json -o buildfilter -x test${TEST_FILE_NUMBER}.cmp.${RAND_NAME}.json )
