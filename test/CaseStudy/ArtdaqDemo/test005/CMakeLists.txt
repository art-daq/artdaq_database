SET ( TEST_NUMBER "005" )

SET ( TEST_NAME "ArtdaqDemo_store" )


SET ( TEST_DBPROVIDER "filesystem" )
string(RANDOM LENGTH 3 ALPHABET 0123456789 RAND_NAME)
configure_file ( ${CMAKE_CURRENT_SOURCE_DIR}/test001.src.fcl ${CMAKE_CURRENT_BINARY_DIR}/test001.src.${RAND_NAME}.fcl @ONLY )
configure_file ( ${CMAKE_CURRENT_SOURCE_DIR}/test001.cmp.fcl ${CMAKE_CURRENT_BINARY_DIR}/test001.cmp.${RAND_NAME}.fcl @ONLY )
cet_test(${TEST_NAME}_${TEST_DBPROVIDER}_${TEST_NUMBER}_t HANDBUILT  TEST_EXEC ArtdaqDemo_t 
  DATAFILES 
    ${CMAKE_CURRENT_BINARY_DIR}/test001.src.${RAND_NAME}.fcl 
    ${CMAKE_CURRENT_BINARY_DIR}/test001.cmp.${RAND_NAME}.fcl 
  TEST_ARGS -o store -d ${TEST_DBPROVIDER} -c ${TEST_COLLECTION_NAME} -f fhicl -v ${TEST_VERSION_NAME}-${TEST_NUMBER} -g ${TEST_CONFIGURATION_NAME}-${TEST_NUMBER} -s test001.src.${RAND_NAME}.fcl -r test001.cmp.${RAND_NAME}.fcl )

SET ( TEST_DBPROVIDER "mongo" )
string(RANDOM LENGTH 3 ALPHABET 0123456789 RAND_NAME)
configure_file ( ${CMAKE_CURRENT_SOURCE_DIR}/test001.src.fcl ${CMAKE_CURRENT_BINARY_DIR}/test001.src.${RAND_NAME}.fcl @ONLY )
configure_file ( ${CMAKE_CURRENT_SOURCE_DIR}/test001.cmp.fcl ${CMAKE_CURRENT_BINARY_DIR}/test001.cmp.${RAND_NAME}.fcl @ONLY )
cet_test(${TEST_NAME}_${TEST_DBPROVIDER}_${TEST_NUMBER}_t HANDBUILT  TEST_EXEC ArtdaqDemo_t 
  DATAFILES 
    ${CMAKE_CURRENT_BINARY_DIR}/test001.src.${RAND_NAME}.fcl 
    ${CMAKE_CURRENT_BINARY_DIR}/test001.cmp.${RAND_NAME}.fcl 
  TEST_ARGS -o store -d ${TEST_DBPROVIDER} -c ${TEST_COLLECTION_NAME} -f fhicl -v ${TEST_VERSION_NAME}-${TEST_NUMBER} -g ${TEST_CONFIGURATION_NAME}-${TEST_NUMBER} -s test001.src.${RAND_NAME}.fcl -r test001.cmp.${RAND_NAME}.fcl )

SET ( TEST_NAME "ArtdaqDemo_load" )
  
SET ( TEST_DBPROVIDER "filesystem" )
string(RANDOM LENGTH 3 ALPHABET 0123456789 RAND_NAME)
configure_file ( ${CMAKE_CURRENT_SOURCE_DIR}/test001.cmp.fcl ${CMAKE_CURRENT_BINARY_DIR}/test001.cmp.${RAND_NAME}.fcl @ONLY )
cet_test(${TEST_NAME}_${TEST_DBPROVIDER}_${TEST_NUMBER}_t HANDBUILT  TEST_EXEC ArtdaqDemo_t 
  DATAFILES 
    ${CMAKE_CURRENT_BINARY_DIR}/test001.cmp.${RAND_NAME}.fcl 
  TEST_ARGS -o load -d ${TEST_DBPROVIDER} -c ${TEST_COLLECTION_NAME} -f fhicl -g ${TEST_CONFIGURATION_NAME}-${TEST_NUMBER}  -r test001.cmp.${RAND_NAME}.fcl )

SET ( TEST_DBPROVIDER "mongo" )
string(RANDOM LENGTH 3 ALPHABET 0123456789 RAND_NAME)
configure_file ( ${CMAKE_CURRENT_SOURCE_DIR}/test001.cmp.fcl ${CMAKE_CURRENT_BINARY_DIR}/test001.cmp.${RAND_NAME}.fcl @ONLY )
cet_test(${TEST_NAME}_${TEST_DBPROVIDER}_${TEST_NUMBER}_t HANDBUILT  TEST_EXEC ArtdaqDemo_t 
  DATAFILES 
    ${CMAKE_CURRENT_BINARY_DIR}/test001.cmp.${RAND_NAME}.fcl 
  TEST_ARGS -o load -d ${TEST_DBPROVIDER} -c ${TEST_COLLECTION_NAME} -f fhicl -g ${TEST_CONFIGURATION_NAME}-${TEST_NUMBER} -r test001.cmp.${RAND_NAME}.fcl )
