SET ( TEST_NAME "Dune35tDemo_globalconfstore" )

SET ( TEST_NUMBER "002" )


SET ( TEST_FILE_NUMBER "001" )
SET ( TEST_DBPROVIDER "filesystem" )
cet_test_env("ARTDAQ_DATABASE_URI=${ARTDAQ_DATABASE_URI_FILESYSTEM}")
string(RANDOM LENGTH 5 ALPHABET 0123456789 RAND_NAME)
configure_file ( ${CMAKE_CURRENT_SOURCE_DIR}/test${TEST_FILE_NUMBER}.tar.bz2.base64 ${CMAKE_CURRENT_BINARY_DIR}/test${TEST_FILE_NUMBER}.tar.bz2.base64.${RAND_NAME} @ONLY )
configure_file ( ${CMAKE_CURRENT_SOURCE_DIR}/test${TEST_FILE_NUMBER}.cmp.json ${CMAKE_CURRENT_BINARY_DIR}/test${TEST_FILE_NUMBER}.cmp.${RAND_NAME}.json @ONLY )
cet_test(${TEST_NAME}_${TEST_DBPROVIDER}_${TEST_NUMBER}_t HANDBUILT  TEST_EXEC Dune35tDemo_t 
  DATAFILES 
     ${CMAKE_CURRENT_BINARY_DIR}/test${TEST_FILE_NUMBER}.tar.bz2.base64.${RAND_NAME}
     ${CMAKE_CURRENT_BINARY_DIR}/test${TEST_FILE_NUMBER}.cmp.${RAND_NAME}.json
  TEST_ARGS  -o globalconfstore -p ${TEST_DBPROVIDER} -f fhicl -v ${TEST_VERSION_NAME}-${TEST_NUMBER} -g ${TEST_CONFIGURATION_NAME}-${TEST_NUMBER} -s ${CMAKE_CURRENT_BINARY_DIR}/test${TEST_FILE_NUMBER}.tar.bz2.base64.${RAND_NAME} -x test${TEST_FILE_NUMBER}.cmp.${RAND_NAME}.json)

SET ( TEST_FILE_NUMBER "002" ) 
SET ( TEST_DBPROVIDER "mongo" )
cet_test_env("ARTDAQ_DATABASE_URI=${ARTDAQ_DATABASE_URI_MONGO}")  
string(RANDOM LENGTH 5 ALPHABET 0123456789 RAND_NAME)
configure_file ( ${CMAKE_CURRENT_SOURCE_DIR}/test${TEST_FILE_NUMBER}.tar.bz2.base64 ${CMAKE_CURRENT_BINARY_DIR}/test${TEST_FILE_NUMBER}.tar.bz2.base64.${RAND_NAME} @ONLY )
configure_file ( ${CMAKE_CURRENT_SOURCE_DIR}/test${TEST_FILE_NUMBER}.cmp.json ${CMAKE_CURRENT_BINARY_DIR}/test${TEST_FILE_NUMBER}.cmp.${RAND_NAME}.json @ONLY )
cet_test(${TEST_NAME}_${TEST_DBPROVIDER}_${TEST_NUMBER}_t HANDBUILT  TEST_EXEC Dune35tDemo_t 
  DATAFILES 
     ${CMAKE_CURRENT_BINARY_DIR}/test${TEST_FILE_NUMBER}.tar.bz2.base64.${RAND_NAME}
     ${CMAKE_CURRENT_BINARY_DIR}/test${TEST_FILE_NUMBER}.cmp.${RAND_NAME}.json     
  TEST_ARGS  -o globalconfstore -p ${TEST_DBPROVIDER} -f fhicl -v ${TEST_VERSION_NAME}-${TEST_NUMBER} -g ${TEST_CONFIGURATION_NAME}-${TEST_NUMBER} -s ${CMAKE_CURRENT_BINARY_DIR}/test${TEST_FILE_NUMBER}.tar.bz2.base64.${RAND_NAME} -x test${TEST_FILE_NUMBER}.cmp.${RAND_NAME}.json)

